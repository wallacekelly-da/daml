<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ledger API Test Tool &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="Visualizing Daml Contracts" href="../visual.html" />
  <link rel="prev" title="Daml Integration Kit" href="../../daml-integration-kit/index.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/authorization.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../app-dev/ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/grpc/index.html">gRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../app-dev/bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../error-codes/self-service/index.html">Self-Service Error Codes (Experimental)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../error-codes/self-service/index.html#self-service-error-codes-migration-guide">Self-Service Error Codes Migration Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/ledger-topologies.html">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../extractor.html">Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../export/index.html">Ledger Export</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../daml-integration-kit/index.html">Daml Integration Kit</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Ledger API Test Tool</a><ul>
<li><a class="reference internal" href="#downloading-the-tool">Downloading the tool</a></li>
<li><a class="reference internal" href="#running-the-tool-against-a-custom-ledger-api-endpoint">Running the tool against a custom Ledger API endpoint</a></li>
<li><a class="reference internal" href="#exploring-options-the-tool-provides">Exploring options the tool provides</a><ul>
<li><a class="reference internal" href="#selecting-tests-to-run">Selecting tests to run</a></li>
<li><a class="reference internal" href="#performance-tests">Performance tests</a></li>
</ul>
</li>
<li><a class="reference internal" href="#try-out-the-ledger-api-test-tool-against-daml-sandbox">Try out the Ledger API Test Tool against Daml Sandbox</a></li>
<li><a class="reference internal" href="#using-the-tool-with-a-known-to-be-faulty-ledger-api-implementation">Using the tool with a known-to-be-faulty Ledger API implementation</a></li>
<li><a class="reference internal" href="#tuning-the-testing-behaviour-of-the-tool">Tuning the testing behaviour of the tool</a></li>
<li><a class="reference internal" href="#accomodating-different-ledger-clock-intervals">Accomodating different ledger clock intervals</a></li>
<li><a class="reference internal" href="#verbose-output">Verbose output</a></li>
<li><a class="reference internal" href="#concurrent-test-runs">Concurrent test runs</a></li>
<li><a class="reference internal" href="#retired-tests">Retired tests</a></li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="ledger-api-test-tool">
<h1>Ledger API Test Tool<a class="headerlink" href="#ledger-api-test-tool" title="Permalink to this headline">¶</a></h1>
<p>The Ledger API Test Tool is a command line tool for testing the correctness of
implementations of the <a class="reference internal" href="../../app-dev/ledger-api.html"><span class="doc">Ledger API</span></a>,
i.e. Daml ledgers. For example, it
will show you if there are consistency or conformance problem with your
implementation.</p>
<p>Its intended audience are developers of Daml ledgers, who are using the
Daml Ledger Implementation Kit to develop
a Daml ledger on top of their distributed-ledger or database of choice.</p>
<p>Use this tool to verify if your Ledger API endpoint conforms to the
<a class="reference internal" href="../../concepts/ledger-model/index.html"><span class="doc">DA Ledger Model</span></a>.</p>
<div class="section" id="downloading-the-tool">
<h2>Downloading the tool<a class="headerlink" href="#downloading-the-tool" title="Permalink to this headline">¶</a></h2>
<p>Download the Ledger API Test Tool from <a class="reference external" href="https://repo1.maven.org/maven2/com/daml/ledger-api-test-tool/__VERSION__/ledger-api-test-tool-__VERSION__.jar">Maven</a>
and save it as <code class="docutils literal notranslate"><span class="pre">ledger-api-test-tool.jar</span></code> in your current directory.</p>
</div>
<div class="section" id="running-the-tool-against-a-custom-ledger-api-endpoint">
<h2>Running the tool against a custom Ledger API endpoint<a class="headerlink" href="#running-the-tool-against-a-custom-ledger-api-endpoint" title="Permalink to this headline">¶</a></h2>
<p>Run this command to test your Ledger API endpoint exposed at host <code class="docutils literal notranslate"><span class="pre">&lt;host&gt;</span></code> and
at a port <code class="docutils literal notranslate"><span class="pre">&lt;port&gt;</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar &lt;host&gt;:&lt;port&gt;
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar localhost:6865
</pre></div>
</div>
<p>The tool will upload the required DARs to the ledger, and then run all tests.</p>
<p>If any test embedded in the tool fails, it will print out details of the failure
for further debugging.</p>
</div>
<div class="section" id="exploring-options-the-tool-provides">
<h2>Exploring options the tool provides<a class="headerlink" href="#exploring-options-the-tool-provides" title="Permalink to this headline">¶</a></h2>
<p>Run the tool with <code class="docutils literal notranslate"><span class="pre">--help</span></code> flag to obtain the list of options the tool provides:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar --help
</pre></div>
</div>
<div class="section" id="selecting-tests-to-run">
<h3>Selecting tests to run<a class="headerlink" href="#selecting-tests-to-run" title="Permalink to this headline">¶</a></h3>
<p>Running the tool without any argument runs only the <em>default tests</em>.</p>
<p>Those include all tests that are known to be safe to be run concurrently as part of a single run.</p>
<p>Tests that either change the global state of the ledger (e.g. configuration management) or are designed to stress the implementation need to be explicitly included using the available command line options.</p>
<p>Use the following command line flags to select which tests to run:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--list</span></code>: print all available test suites to the console, shows if they are run by default</li>
<li><code class="docutils literal notranslate"><span class="pre">--list-all</span></code>: print all available tests to the console, shows if they are run by default</li>
<li><code class="docutils literal notranslate"><span class="pre">--include</span></code>: only run the tests that match the argument</li>
<li><code class="docutils literal notranslate"><span class="pre">--exclude</span></code>: do not run the tests that match the argument</li>
<li><code class="docutils literal notranslate"><span class="pre">--perf-tests</span></code>: list performance tests to run; cannot be combined with normal tests</li>
<li><code class="docutils literal notranslate"><span class="pre">--skip-dar-upload</span></code>: skip upload of DAR files into ledger. DAR files should be uploaded manually before the tests.</li>
</ul>
<p>Include and exclude are matched as prefixes, e.g. <code class="docutils literal notranslate"><span class="pre">--exclude=SemanticTests</span></code>
will exclude all tests whose name starts with <code class="docutils literal notranslate"><span class="pre">SemanticTests</span></code>. Test names
always start with their suite name followed by a colon, so the test suite
names shown by <code class="docutils literal notranslate"><span class="pre">--list</span></code> can be useful for coarse-grained inclusion/exclusion.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">--include</span></code> and <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> (and <code class="docutils literal notranslate"><span class="pre">--perf-tests</span></code>) can be specified
multiple times and/or provide comma-separated lists, i.e. all of these are
equivalent:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">--include=a,b,c</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--include=a</span> <span class="pre">--include=b</span> <span class="pre">--include=c</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">--include=a,b</span> <span class="pre">--include=c</span></code></li>
</ul>
<p>The logic is always to first select included tests, then remove from that the
excluded ones, i.e. include directives never override a corresponding exclude
directive.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">--include</span></code> flag is given, all of the tests are included. You
cannot run performance and non-performance tests in the same invocation.
<code class="docutils literal notranslate"><span class="pre">--exclude</span></code> is ignored when running performance tests, and the program will
stop if it detects that both <code class="docutils literal notranslate"><span class="pre">--perf-tests</span></code> and <code class="docutils literal notranslate"><span class="pre">--include</span></code> have been specified.</p>
<p>Examples (hitting a single participant at <code class="docutils literal notranslate"><span class="pre">localhost:6865</span></code>):</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Only run <code class="docutils literal notranslate"><span class="pre">TestA</span></code></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar --include TestA localhost:6865
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Run all tests, but not <code class="docutils literal notranslate"><span class="pre">TestB</span></code></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar --exclude TestB localhost:6865
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Run all tests</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar localhost:6865
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Run all tests, but not <code class="docutils literal notranslate"><span class="pre">TestC</span></code></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar --exclude TestC
</pre></div>
</div>
</div>
</div>
<div class="section" id="performance-tests">
<h3>Performance tests<a class="headerlink" href="#performance-tests" title="Permalink to this headline">¶</a></h3>
<p>The available performance tests allow to establish the “performance envelope”
of the ledger under test (a term <a class="reference external" href="https://en.wikipedia.org/wiki/Flight_envelope">borrowed from aeronautics</a>),
which offers an indication of the amount of the parameters under which a
ledger implementation is supposed to perform.</p>
<p>Those tests include tail latency, throughput and maximum size of a single
transaction. You can run the tool with the <code class="docutils literal notranslate"><span class="pre">--list</span></code> option to see a list
of available test suites that includes individual performance envelope test
cases. You can mix and match those tests to produce a test suite tailored
to match the expected performance envelope of a given ledger implementation
using a specific hardware setup.</p>
<p>For example, the following will verify that the ledger under test can
have a tail latency of one second when processing twenty pings, perform
twenty pings per seconds and being able to process a transaction one
megabyte in size:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar <span class="se">\</span>
<span class="go">  --perf-tests=PerformanceEnvelope.Latency.1000ms \</span>
<span class="go">  --perf-tests=PerformanceEnvelope.Throughput.TwentyOPS \</span>
<span class="go">  --perf-tests=PerformanceEnvelope.TransactionSize.1000KB \</span>
<span class="go">  localhost:6865</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A “ping” is a collective name for two templates used to evaluate
the performance envelope. Each of the two templates, “Ping” and
“Pong”, have a single choice allowing the controller to create
an instance of the complementary template, directed to the
original sender.</p>
</div>
<p>The test run will also produce a short summary of statistics which is
printed to standard output by default but that can be written to a
specific file path using the <code class="docutils literal notranslate"><span class="pre">--perf-tests-report</span></code> command line option.</p>
</div>
</div>
<div class="section" id="try-out-the-ledger-api-test-tool-against-daml-sandbox">
<h2>Try out the Ledger API Test Tool against Daml Sandbox<a class="headerlink" href="#try-out-the-ledger-api-test-tool-against-daml-sandbox" title="Permalink to this headline">¶</a></h2>
<p>If you wanted to test out the tool, you can run it against
<a class="reference internal" href="../sandbox.html"><span class="doc">Daml Sandbox</span></a>. To do this:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>java -jar ledger-api-test-tool.jar --extract
<span class="gp">$ </span>daml sandbox *.dar
<span class="gp">$ </span>java -jar ledger-api-test-tool.jar localhost:6865
</pre></div>
</div>
</div></blockquote>
<p>This should always succeed, as the Sandbox is tested to correctly implement the
Ledger API. This is useful if you do not have yet a custom Ledger API endpoint.</p>
</div>
<div class="section" id="using-the-tool-with-a-known-to-be-faulty-ledger-api-implementation">
<h2>Using the tool with a known-to-be-faulty Ledger API implementation<a class="headerlink" href="#using-the-tool-with-a-known-to-be-faulty-ledger-api-implementation" title="Permalink to this headline">¶</a></h2>
<p>Use flag <code class="docutils literal notranslate"><span class="pre">--must-fail</span></code> if you expect one or more or the scenario tests to
fail. If enabled, the tool will return the success exit code when at least one
test fails, and it will return a failure exit code when all tests succeed:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">java</span> <span class="pre">-jar</span> <span class="pre">ledger-api-test-tool.jar</span> <span class="pre">--must-fail</span> <span class="pre">localhost:6865</span></code></div></blockquote>
<p>This is useful during development of a Daml ledger implementation, when tool
needs to be used against a known-to-be-faulty implementation (e.g. in CI). It
will still print information about failed tests.</p>
</div>
<div class="section" id="tuning-the-testing-behaviour-of-the-tool">
<h2>Tuning the testing behaviour of the tool<a class="headerlink" href="#tuning-the-testing-behaviour-of-the-tool" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Use the command line option <code class="docutils literal notranslate"><span class="pre">--timeout-scale-factor</span></code> to tune timeouts applied</dt>
<dd>by the tool.</dd>
</dl>
<ul class="simple">
<li>Set <code class="docutils literal notranslate"><span class="pre">--timeout-scale-factor</span></code> to a floating point value higher than 1.0 to make
the tool wait longer for expected events coming from the Daml ledger
implementation under test. Conversely use values smaller than 1.0 to make it
wait shorter.</li>
</ul>
</div>
<div class="section" id="accomodating-different-ledger-clock-intervals">
<h2>Accomodating different ledger clock intervals<a class="headerlink" href="#accomodating-different-ledger-clock-intervals" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Use the command line option <code class="docutils literal notranslate"><span class="pre">--ledger-clock-granularity</span></code> to indicate the maximum</dt>
<dd>interval at which the ledger’s clock will increment.</dd>
</dl>
<ul class="simple">
<li>If running on a ledger where ledger time increments in a time period greater than 10s,
set <code class="docutils literal notranslate"><span class="pre">--ledger-clock-granularity</span></code> to a value higher than 10000 (10,000ms).  Tests
that are sensitive to the ledger clock will then wait for a corresponding longer period
of time to ensure completion of operations, avoiding timeouts and premature failures.
The command deduplication test suite is particularly sensitive to this value.</li>
</ul>
</div>
<div class="section" id="verbose-output">
<h2>Verbose output<a class="headerlink" href="#verbose-output" title="Permalink to this headline">¶</a></h2>
<p>Use the command line option <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> to print full stack traces on failures.</p>
</div>
<div class="section" id="concurrent-test-runs">
<h2>Concurrent test runs<a class="headerlink" href="#concurrent-test-runs" title="Permalink to this headline">¶</a></h2>
<p>To minimize concurrent runs of tests, <code class="docutils literal notranslate"><span class="pre">--concurrent-test-runs</span></code> can be set to 1 or 2.
The default value is the number of processors available.</p>
<p>Note that certain tests, known to be possibly interfering with others (e.g.
configuration management), are always run sequentially and as the last tests in a run.</p>
</div>
<div class="section" id="retired-tests">
<h2>Retired tests<a class="headerlink" href="#retired-tests" title="Permalink to this headline">¶</a></h2>
<p>A few tests can be retired over time as they could be deemed not providing the
necessary signal to a developer or operator that an integration correctly
implements the Daml Ledger API. Those test will nominally be kept in the
test suite for a time to prevent unwanted breakages of existing CI pipelines.
They will however not be run and they will eventually be removed. You are
advised to remove any explicit reference to those tests while they are in
their deprecation period.</p>
<p>Retired tests are not listed when using <code class="docutils literal notranslate"><span class="pre">--list</span></code> or <code class="docutils literal notranslate"><span class="pre">--list-all</span></code> but can
be included in a run using <code class="docutils literal notranslate"><span class="pre">--include</span></code>. In this case, nothing will be run
and the test report will mention that the test has been retired and skipped.</p>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../daml-integration-kit/index.html" class="da-btn da-btn-label btn-prev" title="Daml Integration Kit" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="../visual.html" class="da-btn da-btn-label btn-next" title="Visualizing Daml Contracts" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>