<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Troubleshooting &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  <script type="text/javascript" src="../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Good design patterns" href="patterns.html" />
  <link rel="prev" title="Exceptions" href="reference/exceptions.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/authorization.html">Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-dev/ledger-api.html">The Ledger API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/index.html">gRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-java/index.html">Java bindings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/codegen.html">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../app-dev/bindings-java/quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../app-dev/bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../error-codes/self-service/index.html">Self-Service Error Codes (Experimental)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../error-codes/self-service/index.html#self-service-error-codes-migration-guide">Self-Service Error Codes Migration Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/ledger-topologies.html">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/extractor.html">Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/export/index.html">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../daml-integration-kit/index.html">Daml Integration Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/ledger-api-test-tool/index.html">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Troubleshooting</a><ul>
<li><a class="reference internal" href="#error-x-is-not-authorized-to-commit-an-update">Error: “&lt;X&gt; is not authorized to commit an update”</a></li>
<li><a class="reference internal" href="#error-argument-is-not-of-serializable-type">Error “Argument is not of serializable type”</a></li>
<li><a class="reference internal" href="#modeling-questions">Modeling questions</a><ul>
<li><a class="reference internal" href="#how-to-model-an-agreement-with-another-party">How to model an agreement with another party</a></li>
<li><a class="reference internal" href="#how-to-model-rights">How to model rights</a></li>
<li><a class="reference internal" href="#how-to-void-a-contract">How to void a contract</a></li>
<li><a class="reference internal" href="#how-to-represent-off-ledger-parties">How to represent off-ledger parties</a></li>
<li><a class="reference internal" href="#how-to-limit-a-choice-by-time">How to limit a choice by time</a></li>
<li><a class="reference internal" href="#how-to-model-a-mandatory-action">How to model a mandatory action</a></li>
<li><a class="reference internal" href="#when-to-use-optional">When to use Optional</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-questions">Testing questions</a><ul>
<li><a class="reference internal" href="#how-to-test-that-a-contract-is-visible-to-a-party">How to test that a contract is visible to a party</a></li>
<li><a class="reference internal" href="#how-to-test-that-an-update-action-cannot-be-committed">How to test that an update action cannot be committed</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<div class="section" id="error-x-is-not-authorized-to-commit-an-update">
<span id="faqs-multi-obligables"></span><h2>Error: “&lt;X&gt; is not authorized to commit an update”<a class="headerlink" href="#error-x-is-not-authorized-to-commit-an-update" title="Permalink to this headline">¶</a></h2>
<p>This error occurs when there are multiple obligables on a contract.</p>
<p>A cornerstone of Daml is that you cannot create a contract that will force some other party (or parties) into an obligation. This error means that a party is trying to do something that would force another parties into an agreement without their consent.</p>
<p>To solve this, make sure each party is entering into the contract freely by exercising a choice. A good way of ensuring this is the “initial and accept” pattern: see the Daml patterns for more details.</p>
</div>
<div class="section" id="error-argument-is-not-of-serializable-type">
<span id="faqs-serial-arg"></span><h2>Error “Argument is not of serializable type”<a class="headerlink" href="#error-argument-is-not-of-serializable-type" title="Permalink to this headline">¶</a></h2>
<p>This error occurs when you’re using a function as a parameter to a template. For example, here is a contract that creates a <code class="docutils literal notranslate"><span class="pre">Payout</span></code> controller by a receiver’s supervisor:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">template</span> <span class="kt">SupervisedPayout</span>
  <span class="kr">with</span>
    <span class="n">supervisor</span> <span class="kt">:</span> <span class="kt">Party</span> <span class="ow">-&gt;</span> <span class="kt">Party</span>
    <span class="n">receiver</span>   <span class="kt">:</span> <span class="kt">Party</span>
    <span class="n">giver</span>      <span class="kt">:</span> <span class="kt">Party</span>
    <span class="n">amount</span>     <span class="kt">:</span> <span class="kt">Decimal</span>
  <span class="kr">where</span>
    <span class="kr">controller</span> <span class="p">(</span><span class="n">supervisor</span> <span class="n">receiver</span><span class="p">)</span> <span class="kr">can</span>
      <span class="kt">SupervisedPayout_Call</span>
        <span class="n">returning</span> <span class="kt">ContractId</span> <span class="kt">Payout</span>
        <span class="n">to</span> <span class="n">create</span> <span class="kt">Payout</span> <span class="kr">with</span> <span class="n">giver</span><span class="p">;</span> <span class="n">receiver</span><span class="p">;</span> <span class="n">amount</span>
</pre></div>
</div>
<p>Hovering over the compilation error displays:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[Type checker] Argument expands to non-serializable type Party -&gt; Party.
</pre></div>
</div>
</div>
<div class="section" id="modeling-questions">
<h2>Modeling questions<a class="headerlink" href="#modeling-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-model-an-agreement-with-another-party">
<span id="faqs-proposal"></span><h3>How to model an agreement with another party<a class="headerlink" href="#how-to-model-an-agreement-with-another-party" title="Permalink to this headline">¶</a></h3>
<p>To enter into an agreement, create a contract from a template that has explicit <code class="docutils literal notranslate"><span class="pre">signatory</span></code> and <code class="docutils literal notranslate"><span class="pre">agreement</span></code> statements.</p>
<p>You’ll need to use a series of contracts that give each party the chance to consent, via a contract choice.</p>
<p>Because of the rules that Daml enforces, it is not possible for a single party to create an instance of a multi-party agreement. This is because such a creation would force the other parties into that agreement, without giving them a choice to enter it or not.</p>
</div>
<div class="section" id="how-to-model-rights">
<span id="faqs-rights"></span><h3>How to model rights<a class="headerlink" href="#how-to-model-rights" title="Permalink to this headline">¶</a></h3>
<p>Use a contract choice to model a right. A party exercises that right by exercising the choice.</p>
</div>
<div class="section" id="how-to-void-a-contract">
<span id="faqs-voiding-contract"></span><h3>How to void a contract<a class="headerlink" href="#how-to-void-a-contract" title="Permalink to this headline">¶</a></h3>
<p>To allow voiding a contract, provide a choice that does not create any new contracts. Daml contracts are archived (but not deleted) when a consuming choice is made - so exercising the choice effectively voids the contract.</p>
<p>However, you should bear in mind who is allowed to void a contract, especially without the re-sought consent of the other signatories.</p>
</div>
<div class="section" id="how-to-represent-off-ledger-parties">
<span id="faqs-party-delegation"></span><h3>How to represent off-ledger parties<a class="headerlink" href="#how-to-represent-off-ledger-parties" title="Permalink to this headline">¶</a></h3>
<p>You’d need to do this if you can’t set up all parties as ledger participants, because the Daml <code class="docutils literal notranslate"><span class="pre">Party</span></code> type gets associated with a cryptographic key and can so only be used with parties that have been set up accordingly.</p>
<p>To model off-ledger parties in Daml, they must be represented on-ledger by a participant who can sign on their behalf. You could represent them with an ordinary <code class="docutils literal notranslate"><span class="pre">Text</span></code> argument.</p>
<p>This isn’t very private, so you could use a numeric ID/an accountId to identify the off-ledger client.</p>
</div>
<div class="section" id="how-to-limit-a-choice-by-time">
<span id="faqs-timed-choice"></span><h3>How to limit a choice by time<a class="headerlink" href="#how-to-limit-a-choice-by-time" title="Permalink to this headline">¶</a></h3>
<p>Some rights have a time limit: either a time by which it must be exercised or a time before which it cannot be exercised.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">getTime</span></code> to get the current time, and compare your desired time to it. Use <code class="docutils literal notranslate"><span class="pre">assert</span></code> to abort the choice if your time condition is not met.</p>
</div>
<div class="section" id="how-to-model-a-mandatory-action">
<span id="faqs-mandatory-action"></span><h3>How to model a mandatory action<a class="headerlink" href="#how-to-model-a-mandatory-action" title="Permalink to this headline">¶</a></h3>
<p>If you want to ensure that a party takes some action within a given time period. Might want to incur a penalty if they don’t - because that would breach the contract.</p>
<p>For example: an Invoice that must be paid by a certain date, with a penalty (could be something like an added interest charge or a penalty fee). To do this, you could have a time-limited Penalty choice that can only be exercised <em>after</em> the time period has expired.</p>
<p>However, note that the penalty action can only ever create another contract on the ledger, which represents an agreement between all parties that the initial contract has been breached. Ultimately, the recourse for any breach is legal action of some kind. What Daml provides is provable violation of the agreement.</p>
</div>
<div class="section" id="when-to-use-optional">
<span id="faqs-optional"></span><h3>When to use Optional<a class="headerlink" href="#when-to-use-optional" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Optional</span></code> type, from the standard library, to indicate that a value is optional, i.e, that in some cases it may be missing.</p>
<p>In functional languages, <code class="docutils literal notranslate"><span class="pre">Optional</span></code> is a better way of indicating a missing value than using the more familiar value “NULL”, present in imperative languages like Java.</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">Optional</span></code>, include <code class="docutils literal notranslate"><span class="pre">Optional.daml</span></code> from the standard library:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nn">DA.Optional</span>
</pre></div>
</div>
<p>Then, you can create <code class="docutils literal notranslate"><span class="pre">Optional</span></code> values like this:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kt">Some</span> <span class="s">&quot;Some text&quot;</span>    <span class="c1">-- Optional value exists.</span>
<span class="kt">None</span>                <span class="c1">-- Optional value does not exist.</span>
</pre></div>
</div>
<p>You can test for existence in various ways:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="c1">-- isSome returns True if there is a value.</span>
<span class="kr">if</span> <span class="n">isSome</span> <span class="n">m</span>
  <span class="kr">then</span> <span class="s">&quot;Yes&quot;</span>
  <span class="kr">else</span> <span class="s">&quot;No&quot;</span>
<span class="c1">-- The inverse is isNone.</span>
<span class="kr">if</span> <span class="n">isNone</span> <span class="n">m</span>
  <span class="kr">then</span> <span class="s">&quot;No&quot;</span>
  <span class="kr">else</span> <span class="s">&quot;Yes&quot;</span>
</pre></div>
</div>
<p>If you need to extract the value, use the <code class="docutils literal notranslate"><span class="pre">optional</span></code> function.</p>
<p>It returns a value of a defined type, and takes a <code class="docutils literal notranslate"><span class="pre">Optional</span></code> value and a function that can transform the value contained in a <code class="docutils literal notranslate"><span class="pre">Some</span></code> value of the <code class="docutils literal notranslate"><span class="pre">Optional</span></code> to that type. If it is missing <code class="docutils literal notranslate"><span class="pre">optional</span></code> also takes a value of the return type (the default value), which will be returned if the <code class="docutils literal notranslate"><span class="pre">Optional</span></code> value is <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">let</span> <span class="n">f</span> <span class="ow">=</span> <span class="nf">\</span> <span class="p">(</span><span class="n">i</span> <span class="kt">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="s">&quot;The number is &quot;</span> <span class="o">&lt;&gt;</span> <span class="p">(</span><span class="n">show</span> <span class="n">i</span><span class="p">)</span>
<span class="kr">let</span> <span class="n">t</span> <span class="ow">=</span> <span class="n">optional</span> <span class="s">&quot;No number&quot;</span> <span class="n">f</span> <span class="n">someValue</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">optionalValue</span></code> is <code class="docutils literal notranslate"><span class="pre">Some</span> <span class="pre">5</span></code>, the value of <code class="docutils literal notranslate"><span class="pre">t</span></code> would be <code class="docutils literal notranslate"><span class="pre">&quot;The</span> <span class="pre">number</span> <span class="pre">is</span> <span class="pre">5&quot;</span></code>. If it was <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code> would be <code class="docutils literal notranslate"><span class="pre">&quot;No</span> <span class="pre">number&quot;</span></code>. Note that with <code class="docutils literal notranslate"><span class="pre">optional</span></code>, it is possible to return a different type from that contained in the <code class="docutils literal notranslate"><span class="pre">Optional</span></code> value. This makes the <code class="docutils literal notranslate"><span class="pre">Optional</span></code> type very flexible.</p>
<p>There are many other functions in “Optional.daml” that let you perform familiar functional operations on structures that contain <code class="docutils literal notranslate"><span class="pre">Optional</span></code> values – such as <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code>, etc. on <code class="docutils literal notranslate"><span class="pre">Lists</span></code> of <code class="docutils literal notranslate"><span class="pre">Optional</span></code> values.</p>
</div>
</div>
<div class="section" id="testing-questions">
<h2>Testing questions<a class="headerlink" href="#testing-questions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-to-test-that-a-contract-is-visible-to-a-party">
<span id="faqs-test-visibility"></span><h3>How to test that a contract is visible to a party<a class="headerlink" href="#how-to-test-that-a-contract-is-visible-to-a-party" title="Permalink to this headline">¶</a></h3>
<p>Use a <code class="docutils literal notranslate"><span class="pre">submit</span></code> block and a <code class="docutils literal notranslate"><span class="pre">fetch</span></code> operation. The <code class="docutils literal notranslate"><span class="pre">submit</span></code> block tests that the contract (as a <code class="docutils literal notranslate"><span class="pre">ContractId</span></code>) is visible to that party, and the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> tests that it is valid, i.e., that the contract does exist.</p>
<p>For example, if we wanted to test for the existence and visibility of an <code class="docutils literal notranslate"><span class="pre">Invoice</span></code>, visible to ‘Alice’, whose ContractId is bound to <cite>invoiceCid</cite>, we could say:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">submit</span> <span class="n">alice</span> <span class="kr">do</span>
  <span class="n">result</span> <span class="ow">&lt;-</span> <span class="n">fetch</span> <span class="n">invoiceCid</span>
</pre></div>
</div>
<p>You could also check (in the <code class="docutils literal notranslate"><span class="pre">submit</span></code> block) that the contract has some expected values:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">assert</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="p">(</span><span class="kt">Invoice</span> <span class="kr">with</span>
  <span class="n">payee</span> <span class="ow">=</span> <span class="n">alice</span>
  <span class="n">payer</span> <span class="ow">=</span> <span class="n">acme</span>
  <span class="n">amount</span> <span class="ow">=</span> <span class="mf">130.0</span>
  <span class="n">service</span> <span class="ow">=</span> <span class="s">&quot;A job well done&quot;</span>
  <span class="n">timeLimit</span> <span class="ow">=</span> <span class="n">datetime</span> <span class="mi">1970</span> <span class="kt">Feb</span> <span class="mi">20</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>using an equality test and an <code class="docutils literal notranslate"><span class="pre">assert</span></code>:</p>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="nf">submit</span> <span class="n">alice</span> <span class="kr">do</span>
  <span class="n">result</span> <span class="ow">&lt;-</span> <span class="n">fetch</span> <span class="n">invoiceCid</span>
  <span class="n">assert</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="p">(</span><span class="kt">Invoice</span> <span class="kr">with</span>
    <span class="n">payee</span> <span class="ow">=</span> <span class="n">alice</span>
    <span class="n">payer</span> <span class="ow">=</span> <span class="n">acme</span>
    <span class="n">amount</span> <span class="ow">=</span> <span class="mf">130.0</span>
    <span class="n">service</span> <span class="ow">=</span> <span class="s">&quot;A job well done&quot;</span>
    <span class="n">timeLimit</span> <span class="ow">=</span> <span class="n">datetime</span> <span class="mi">1970</span> <span class="kt">Feb</span> <span class="mi">20</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-test-that-an-update-action-cannot-be-committed">
<span id="faqs-must-fail"></span><h3>How to test that an update action cannot be committed<a class="headerlink" href="#how-to-test-that-an-update-action-cannot-be-committed" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">submitMustFail</span></code> function. This is similar in form to the <code class="docutils literal notranslate"><span class="pre">submit</span></code> function, but is an assertion that an update will fail if attempted by some Party.</p>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference/exceptions.html" class="da-btn da-btn-label btn-prev" title="Exceptions" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="patterns.html" class="da-btn da-btn-label btn-next" title="Good design patterns" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>