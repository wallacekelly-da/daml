<!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Generate Java code from Daml &mdash; Daml SDK __VERSION__ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
  
  <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/copybutton.js"></script>
  
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="next" title="Example project" href="example.html" />
  <link rel="prev" title="Java bindings" href="index.html" /> 

  
  <link rel="icon" type="image/svg+xml"  href="../../_static/images/daml-logo-mark-light.svg">
  <link rel="alternate icon" href="../../_static/images/daml-favicon-1.ico">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MSWJMNX');</script>
  <!-- End Google Tag Manager -->

  
  <!-- Mopinion Pastea.se  start --><script type="text/javascript">(function(){var id="4s6vwov7ad6qyxhq8iwbyhocrsn2nm36k25";var js=document.createElement("script");js.setAttribute("type","text/javascript");js.setAttribute("src","//deploy.mopinion.com/js/pastease.js");js.async=true;document.getElementsByTagName("head")[0].appendChild(js);var t=setInterval(function(){try{new Pastease.load(id);clearInterval(t)}catch(e){}},50)})();</script><!-- Mopinion Pastea.se end -->
</head>

<body class="wy-body-for-nav">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MSWJMNX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-nav-side-shadow"></div>
      <div class="wy-side-scroll">

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
          
          
          
          
          
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Daml Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/installation.html">Installing the SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/path-variables.html">Setting JAVA_HOME and PATH variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/manual-download.html">Manually installing the SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Building Your App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/app-architecture.html">App Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/first-feature.html">Your First Feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.daml.com/cheat-sheet">Cheat Sheet</a></li>
</ul>
<p class="caption"><span class="caption-text">Writing Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../daml/intro/0_Intro.html">An introduction to Daml</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/1_Token.html">1 Basic contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/2_DamlScript.html">2 Testing templates using Daml Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/3_Data.html">3 Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/4_Transformations.html">4 Transforming data using choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/5_Restrictions.html">5 Adding constraints to a contract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/6_Parties.html">6 Parties and authority</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/7_Composing.html">7 Composing choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/8_Exceptions.html">8 Exception Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/9_Dependencies.html">9 Working with Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/10_Functional101.html">10 Functional Programming 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/11_StdLib.html">11 Intro to the Daml Standard Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/intro/12_Testing.html">12 Testing Daml Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/reference/index.html">Language reference docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/structure.html">Overview: template structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/choices.html">Choices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/updates.html">Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/data-types.html">Data types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/working-with.html">Built-in functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/scenarios.html">Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/file-structure.html">File structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/packages.html">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/contract-keys.html">Contract keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/reference/exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/patterns.html">Good design patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/initaccept.html">Initiate and Accept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/multiparty-agreement.html">Multiple party agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/delegation.html">Delegation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/locking.html">Locking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-archiving.html">Locking by archiving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-state.html">Locking by state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../daml/patterns/locking/locking-by-safekeeping.html">Locking by safekeeping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../daml/patterns/legends.html">Diagram legends</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Building applications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../app-arch.html">Application architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bindings-ts/index.html">JavaScript Client Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bindings-ts/daml2js.html">JavaScript Code Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-ts/daml-react.html">&#64;daml/react</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-ts/daml-ledger.html">&#64;daml/ledger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-ts/daml-types.html">&#64;daml/types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-ts/testing.html">Testing Your Web App</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../json-api/index.html">HTTP JSON API Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/lf-value-specification.html">Daml-LF JSON Encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/search-query-language.html">Query language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../json-api/production-setup.html">Production Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-script/index.html">Daml Script</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-repl/index.html">Daml REPL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade/index.html">Upgrading and Extending Daml applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/extend.html">Extending Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/upgrade.html">Upgrading Daml applications</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/automation.html">Automating the Upgrade Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authorization.html">Authorization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ledger-api.html">The Ledger API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../services.html">The Ledger API services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grpc/index.html">gRPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grpc/daml-to-ledger-api.html">How Daml types are translated to protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../daml-lf-translation.html">How Daml types are translated to Daml-LF</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Java bindings</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Generate Java code from Daml</a></li>
<li class="toctree-l3"><a class="reference internal" href="example.html">Ping Pong Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html">Iou Quickstart Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-scala/index.html">Scala bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-js.html">Node.js bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bindings-x-lang/index.html">Creating your own bindings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../triggers/index.html">Daml Triggers - Off-Ledger Automation in Daml</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/trigger-service/index.html">Trigger Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/trigger-service/authorization.html">Authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/trigger-service/auth0_example.html">Auth0 Example Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/auth-middleware/index.html">Auth Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/auth-middleware/oauth2.html">OAuth 2.0 Auth Middleware</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../error-codes/self-service/index.html">Self-Service Error Codes (Experimental)</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../error-codes/self-service/index.html#self-service-error-codes-migration-guide">Self-Service Error Codes Migration Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Deploying to Daml ledgers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/index.html">Overview of Daml ledgers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/generic_ledger.html">Deploying to a generic Daml ledger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy/ledger-topologies.html">Daml Ledger Topologies</a></li>
</ul>
<p class="caption"><span class="caption-text">Operating Daml</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ops/index.html">Daml Participant pruning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ops/connect/index.html">Operating Daml Connect</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/helm.html">Connect Helm Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ops/connect/auth0.html">Setting Up Auth0</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/assistant.html">Daml Assistant (<code class="docutils literal notranslate"><span class="pre">daml</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml/daml-studio.html">Daml Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/sandbox.html">Daml Sandbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/navigator/index.html">Navigator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/codegen.html">Daml codegen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/profiler.html">Daml Profiler</a></li>
</ul>
<p class="caption"><span class="caption-text">Background concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/glossary.html">Glossary of concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/ledger-model/index.html">Daml Ledger Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-structure.html">Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-integrity.html">Integrity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-privacy.html">Privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-daml.html">Daml: Defining Contract Models Compactly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../concepts/ledger-model/ledger-exceptions.html">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/identity-and-package-management.html">Identity and Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/local-ledger.html">Causality and Local Ledgers</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://daml.com/examples">Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Early Access Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/extractor.html">Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/export/index.html">Ledger Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../daml-integration-kit/index.html">Daml Integration Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/ledger-api-test-tool/index.html">Ledger API Test Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/visual.html">Visualizing Daml Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/interoperability.html">Ledger Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/non-repudiation.html">Non-repudiation</a></li>
</ul>
<p class="caption"><span class="caption-text">Daml Ecosystem</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support/overview.html">Daml Ecosystem Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/status-definitions.html">Status Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/component-statuses.html">Feature and Component Statuses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support/releases.html">Releases and Versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/compatibility.html">Portability, Compatibility, and Support Durations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support.html">Getting Help</a></li>
</ul>

          
          
          
          <div class="pdf-download"><a href="../../_downloads/DigitalAssetSDK.pdf" download>Download as PDF</a></div>
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <div class="topbar fixed">
        
        <nav class="wy-nav-top" aria-label="top navigation">
          
          <i data-toggle="wy-nav-top" class="wy-nav-top-toggle"></i>
          
        </nav>
        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="navbar">
    <h1><img src="../../_static/images/DAML_Logo_Blue.svg"></h1>
    <div class="navbar-menu">
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.daml.com/" role="menuitem" class="da-menu-link">Developers</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com/products" role="menuitem" class="da-menu-link">Products</a>
        </div>
        <div class="da-menu-item da-menu-depth-1" role="menu">
            <a href="https://www.digitalasset.com" role="menuitem" class="da-menu-link">Company</a>
        </div>
    </div>
</div>

        <div class="version ">
          <span class="hide-mobile">Version&nbsp;</span><span class="version_switcher_placeholder"></span>
          
        </div>


        <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->
<div class="search-inline">
    <div id="rtd-search-inline-form" class="wy-form">
        <input type="text" class="search-inline-input" placeholder="Search" name="q">
        <img src="../../_static/images/Search.svg" class="search-inline-img"/>
    </div>
    <div class="search-alert">
        Please enter at least 3 letters.
    </div>
    <div id="search-inline-results" class="search-inline-results">
        
    </div>
</div>
          <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<div class="content-menu collapsed">
    <span class="content-menu-title">In This Section</span>
    <span class="content-menu-expand"></span>
    <div class="content-menu-wrapper">
        
        <!-- Local TOC -->
        <div class="content-menu-toc"><ul>
<li><a class="reference internal" href="#">Generate Java code from Daml</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#understand-the-generated-java-model">Understand the generated Java model</a><ul>
<li><a class="reference internal" href="#map-daml-primitives-to-java-types">Map Daml primitives to Java types</a></li>
<li><a class="reference internal" href="#understand-escaping-rules">Understand escaping rules</a></li>
<li><a class="reference internal" href="#understand-the-generated-classes">Understand the generated classes</a><ul>
<li><a class="reference internal" href="#records-a-k-a-product-types">Records (a.k.a product types)</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#variants-a-k-a-sum-types">Variants (a.k.a sum types)</a></li>
<li><a class="reference internal" href="#parameterized-types">Parameterized types</a></li>
<li><a class="reference internal" href="#enums">Enums</a><ul>
<li><a class="reference internal" href="#convert-a-value-of-a-generated-type-to-a-java-bindings-value">Convert a value of a generated type to a Java Bindings value</a></li>
<li><a class="reference internal" href="#create-a-value-of-a-generated-type-from-a-java-bindings-value">Create a value of a generated type from a Java Bindings value</a></li>
<li><a class="reference internal" href="#non-exposed-parameterized-types">Non-exposed parameterized types</a></li>
<li><a class="reference internal" href="#convert-optional-values">Convert Optional values</a></li>
<li><a class="reference internal" href="#convert-collection-values">Convert Collection values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        
    </div>
</div>
        

      </div>
      <div class="wy-nav-content">
        
        <div class="rst-content">
          
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div itemprop="articleBody">
                
  <div class="section" id="generate-java-code-from-daml">
<span id="daml-codegen-java"></span><h1>Generate Java code from Daml<a class="headerlink" href="#generate-java-code-from-daml" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>When writing applications for the ledger in Java, you want to work with a representation of Daml templates and data types in Java that closely resemble the original Daml code while still being as true to the native types in Java as possible. To achieve this, you can use Daml to Java code generator (“Java codegen”) to generate Java types based on a Daml model. You can then use these types in your Java code when reading information from and sending data to the ledger.</p>
<p>The <a class="reference internal" href="../../tools/codegen.html"><span class="doc">Daml assistant documentation</span></a> describes how to run and configure the code generator for all supported bindings, including Java.</p>
<p>The rest of this page describes Java-specific topics.</p>
</div>
<div class="section" id="understand-the-generated-java-model">
<h2>Understand the generated Java model<a class="headerlink" href="#understand-the-generated-java-model" title="Permalink to this headline">¶</a></h2>
<p>The Java codegen generates source files in a directory tree under the output directory specified on the command line.</p>
<div class="section" id="map-daml-primitives-to-java-types">
<span id="daml-codegen-java-primitive-types"></span><h3>Map Daml primitives to Java types<a class="headerlink" href="#map-daml-primitives-to-java-types" title="Permalink to this headline">¶</a></h3>
<p>Daml built-in types are translated to the following equivalent types in Java:</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="44%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Daml type</th>
<th class="head">Java type</th>
<th class="head">Java Bindings
Value Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Int</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.lang.Long</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Int64.html">Int64</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Numeric</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.math.BigDecimal</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Numeric.html">Numeric</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Text</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.lang.String</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Text.html">Text</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Bool</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.util.Boolean</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Bool.html">Bool</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Party</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.lang.String</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Party.html">Party</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Date</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.time.LocalDate</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Date.html">Date</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Time</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.time.Instant</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Timestamp.html">Timestamp</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">List</span></code> or <code class="docutils literal notranslate"><span class="pre">[]</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.util.List</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/DamlList.html">DamlList</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">TextMap</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.util.Map</span></code>
Restricted to using <code class="docutils literal notranslate"><span class="pre">String</span></code> keys.</td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/DamlTextMap.html">DamlTextMap</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Optional</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">java.util.Optional</span></code></td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/DamlOptional.html">DamlOptional</a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">()</span></code> (Unit)</td>
<td><strong>None</strong> since the Java language doesn’t
have a direct equivalent of Daml’s Unit
type <code class="docutils literal notranslate"><span class="pre">()</span></code>, the generated code uses the
Java Bindings value type.</td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Unit.html">Unit</a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ContractId</span></code></td>
<td>Fields of type <code class="docutils literal notranslate"><span class="pre">ContractId</span> <span class="pre">X</span></code> refer to
the generated <code class="docutils literal notranslate"><span class="pre">ContractId</span></code> class of the
respective template <code class="docutils literal notranslate"><span class="pre">X</span></code>.</td>
<td><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/ContractId.html">ContractId</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="understand-escaping-rules">
<h3>Understand escaping rules<a class="headerlink" href="#understand-escaping-rules" title="Permalink to this headline">¶</a></h3>
<p>To avoid clashes with Java keywords, the Java codegen applies escaping rules to the following Daml identifiers:</p>
<ul class="simple">
<li>Type names (except the already mapped <a class="reference internal" href="#daml-codegen-java-primitive-types"><span class="std std-ref">built-in types</span></a>)</li>
<li>Constructor names</li>
<li>Type parameters</li>
<li>Module names</li>
<li>Field names</li>
</ul>
<p>If any of these identifiers match one of the <a class="reference external" href="https://docs.oracle.com/javase/specs/jls/se12/html/jls-3.html#jls-3.9">Java reserved keywords</a>, the Java codegen appends a dollar sign <code class="docutils literal notranslate"><span class="pre">$</span></code> to the name. For example, a field with the name <code class="docutils literal notranslate"><span class="pre">import</span></code> will be generated as a Java field with the name <code class="docutils literal notranslate"><span class="pre">import$</span></code>.</p>
</div>
<div class="section" id="understand-the-generated-classes">
<h3>Understand the generated classes<a class="headerlink" href="#understand-the-generated-classes" title="Permalink to this headline">¶</a></h3>
<p>Every user-defined data type in Daml (template, record, and variant) is represented by one or more Java classes as described in this section.</p>
<p>The Java package for the generated classes is the equivalent of the lowercase Daml module name.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Daml</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Foo.Bar.Baz</span> <span class="kr">where</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Java</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">foo.bar.baz</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="records-a-k-a-product-types">
<h4>Records (a.k.a product types)<a class="headerlink" href="#records-a-k-a-product-types" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="../../daml/reference/data-types.html#daml-ref-record-types"><span class="std std-ref">Daml record</span></a> is represented by a Java class with fields that have the same name as the Daml record fields. A Daml field having the type of another record is represented as a field having the type of the generated class for that record.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Com/Acme/ProductTypes.daml</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Com.Acme.ProductTypes</span> <span class="kr">where</span>

<span class="kr">data</span> <span class="kt">Person</span> <span class="ow">=</span> <span class="kt">Person</span> <span class="kr">with</span> <span class="n">name</span> <span class="kt">:</span> <span class="kt">Name</span><span class="p">;</span> <span class="n">age</span> <span class="kt">:</span> <span class="kt">Decimal</span>
<span class="kr">data</span> <span class="kt">Name</span> <span class="ow">=</span> <span class="kt">Name</span> <span class="kr">with</span> <span class="n">firstName</span> <span class="kt">:</span> <span class="kt">Text</span><span class="p">;</span> <span class="n">lastName</span> <span class="kt">:</span> <span class="kt">Text</span>
</pre></div>
</div>
</div>
<p>A Java file is generated that defines the class for the type <code class="docutils literal notranslate"><span class="pre">Person</span></code>:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">com/acme/producttypes/Person.java</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.producttypes</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">Name</span> <span class="n">name</span><span class="p">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">BigDecimal</span> <span class="n">age</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Person</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value$</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Person</span><span class="p">(</span><span class="n">Name</span> <span class="n">name</span><span class="p">,</span> <span class="n">BigDecimal</span> <span class="n">age</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">DamlRecord</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>A Java file is generated that defines the class for the type <code class="docutils literal notranslate"><span class="pre">Name</span></code>:</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">com/acme/producttypes.Name.java</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.producttypes</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Name</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">firstName</span><span class="p">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Person</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value$</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Name</span><span class="p">(</span><span class="n">String</span> <span class="n">firstName</span><span class="p">,</span> <span class="n">String</span> <span class="n">lastName</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">DamlRecord</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div></blockquote>
</div>
<div class="section" id="templates">
<span id="daml-codegen-java-templates"></span><h4>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h4>
<p>The Java codegen generates three classes for a Daml template:</p>
<blockquote>
<div><dl class="docutils">
<dt><strong>TemplateName</strong></dt>
<dd>Represents the contract data or the template fields.</dd>
<dt><strong>TemplateName.ContractId</strong></dt>
<dd>Used whenever a contract ID of the corresponding template is used in another template or record, for example: <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">Foo</span> <span class="pre">=</span> <span class="pre">Foo</span> <span class="pre">(ContractId</span> <span class="pre">Bar)</span></code>. This class also provides methods to generate an <code class="docutils literal notranslate"><span class="pre">ExerciseCommand</span></code> for each choice that can be sent to the ledger with the Java Bindings.</dd>
<dt><strong>TemplateName.Contract</strong></dt>
<dd>Represents an actual contract on the ledger. It contains a field for the contract ID (of type <code class="docutils literal notranslate"><span class="pre">TemplateName.ContractId</span></code>) and a field for the template data (of type <code class="docutils literal notranslate"><span class="pre">TemplateName</span></code>). With the static method <code class="docutils literal notranslate"><span class="pre">TemplateName.Contract.fromCreatedEvent</span></code>, you can deserialize a <a class="reference external" href="https://docs.daml.com/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/CreatedEvent.html">CreatedEvent</a> to an instance of <code class="docutils literal notranslate"><span class="pre">TemplateName.Contract</span></code>.</dd>
</dl>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Com/Acme/Templates.daml</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Com.Acme.Templates</span> <span class="kr">where</span>

<span class="kr">data</span> <span class="kt">BarKey</span> <span class="ow">=</span>
  <span class="kt">BarKey</span>
    <span class="kr">with</span>
      <span class="n">p</span> <span class="kt">:</span> <span class="kt">Party</span>
      <span class="n">t</span> <span class="kt">:</span> <span class="kt">Text</span>

<span class="kr">template</span> <span class="kt">Bar</span>
  <span class="kr">with</span>
    <span class="n">owner</span><span class="kt">:</span> <span class="kt">Party</span>
    <span class="n">name</span><span class="kt">:</span> <span class="kt">Text</span>
  <span class="kr">where</span>
    <span class="kr">signatory</span> <span class="n">owner</span>

    <span class="n">key</span> <span class="kt">BarKey</span> <span class="n">owner</span> <span class="n">name</span> <span class="kt">:</span> <span class="kt">BarKey</span>
    <span class="n">maintainer</span> <span class="n">key</span><span class="o">.</span><span class="n">p</span>
    
    <span class="kr">controller</span> <span class="n">owner</span> <span class="kr">can</span>
      <span class="kt">Bar_SomeChoice:</span> <span class="kt">Bool</span>
        <span class="kr">with</span>
        <span class="n">aName</span><span class="kt">:</span> <span class="kt">Text</span>
          <span class="kr">do</span> <span class="kr">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div></blockquote>
<p>A file is generated that defines three Java classes:</p>
<ol class="arabic simple">
<li><code class="docutils literal notranslate"><span class="pre">Bar</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Bar.ContractId</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Bar.Contract</span></code></li>
</ol>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">com/acme/templates/Bar.java</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.templates</span><span class="p">;</span>

<span class="hll"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bar</span> <span class="kd">extends</span> <span class="n">Template</span> <span class="p">{</span>
</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Identifier</span> <span class="n">TEMPLATE_ID</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Identifier</span><span class="p">(</span><span class="s">&quot;some-package-id&quot;</span><span class="p">,</span> <span class="s">&quot;Com.Acme.Templates&quot;</span><span class="p">,</span> <span class="s">&quot;Bar&quot;</span><span class="p">);</span>

  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">owner</span><span class="p">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ExerciseByKeyCommand</span> <span class="nf">exerciseByKeyBar_SomeChoice</span><span class="p">(</span><span class="n">BarKey</span> <span class="n">key</span><span class="p">,</span> <span class="n">Bar_SomeChoice</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ExerciseByKeyCommand</span> <span class="nf">exerciseByKeyBar_SomeChoice</span><span class="p">(</span><span class="n">BarKey</span> <span class="n">key</span><span class="p">,</span> <span class="n">String</span> <span class="n">aName</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="hll">  <span class="kd">public</span> <span class="n">CreateAndExerciseCommand</span> <span class="nf">createAndExerciseBar_SomeChoice</span><span class="p">(</span><span class="n">Bar_SomeChoice</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span>
  <span class="kd">public</span> <span class="n">CreateAndExerciseCommand</span> <span class="nf">createAndExerciseBar_SomeChoice</span><span class="p">(</span><span class="n">String</span> <span class="n">aName</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ContractId</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">contractId</span><span class="p">;</span>

    <span class="kd">public</span> <span class="n">ExerciseCommand</span> <span class="nf">exerciseArchive</span><span class="p">(</span><span class="n">Unit</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

    <span class="kd">public</span> <span class="n">ExerciseCommand</span> <span class="nf">exerciseBar_SomeChoice</span><span class="p">(</span><span class="n">Bar_SomeChoice</span> <span class="n">arg</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="hll">
</span>    <span class="kd">public</span> <span class="n">ExerciseCommand</span> <span class="nf">exerciseBar_SomeChoice</span><span class="p">(</span><span class="n">String</span> <span class="n">aName</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Contract</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">ContractId</span> <span class="n">id</span><span class="p">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Bar</span> <span class="n">data</span><span class="p">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Contract</span> <span class="nf">fromCreatedEvent</span><span class="p">(</span><span class="n">CreatedEvent</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Note that the static methods returning an <code class="docutils literal notranslate"><span class="pre">ExerciseByKeyCommand</span></code> will only be generated for templates that define a key.</p>
</div>
<div class="section" id="variants-a-k-a-sum-types">
<h4>Variants (a.k.a sum types)<a class="headerlink" href="#variants-a-k-a-sum-types" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="../../daml/reference/data-types.html#daml-ref-sum-types"><span class="std std-ref">variant or sum type</span></a> is a type with multiple constructors, where each constructor wraps a value of another type. The generated code is comprised of an abstract class for the variant type itself and a subclass thereof for each constructor. Classes for variant constructors are similar to classes for records.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Com/Acme/Variants.daml</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Com.Acme.Variants</span> <span class="kr">where</span>

<span class="kr">data</span> <span class="kt">BookAttribute</span> <span class="ow">=</span> <span class="kt">Pages</span> <span class="kt">Int</span>
                   <span class="o">|</span> <span class="kt">Authors</span> <span class="p">[</span><span class="kt">Text</span><span class="p">]</span>
                   <span class="o">|</span> <span class="kt">Title</span> <span class="kt">Text</span>
                   <span class="o">|</span> <span class="kt">Published</span> <span class="kr">with</span> <span class="n">year</span><span class="kt">:</span> <span class="kt">Int</span><span class="p">;</span> <span class="n">publisher</span><span class="kt">:</span> <span class="kt">Text</span>
</pre></div>
</div>
</div>
<p>The Java code generated for this variant is:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">com/acme/variants/BookAttribute.java</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.variants</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">BookAttribute</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">BookAttribute</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Value</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">com/acme/variants/bookattribute/Pages.java</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.variants.bookattribute</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pages</span> <span class="kd">extends</span> <span class="n">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">Long</span> <span class="n">longValue</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Pages</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Pages</span><span class="p">(</span><span class="n">Long</span> <span class="n">longValue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Value</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">com/acme/variants/bookattribute/Authors.java</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.variants.bookattribute</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Authors</span> <span class="kd">extends</span> <span class="n">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">listValue</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Authors</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Author</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">listValue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Value</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">com/acme/variants/bookattribute/Title.java</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.variants.bookattribute</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Title</span> <span class="kd">extends</span> <span class="n">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">stringValue</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Title</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Title</span><span class="p">(</span><span class="n">String</span> <span class="n">stringValue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Value</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">com/acme/variants/bookattribute/Published.java</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.variants.bookattribute</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Published</span> <span class="kd">extends</span> <span class="n">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">Long</span> <span class="n">year</span><span class="p">;</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">publisher</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Published</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Published</span><span class="p">(</span><span class="n">Long</span> <span class="n">year</span><span class="p">,</span> <span class="n">String</span> <span class="n">publisher</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">DamlRecord</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameterized-types">
<h4>Parameterized types<a class="headerlink" href="#parameterized-types" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section is only included for completeness: we don’t expect users to make use of the <code class="docutils literal notranslate"><span class="pre">fromValue</span></code> and <code class="docutils literal notranslate"><span class="pre">toValue</span></code> methods, because they would typically come from a template that doesn’t have any unbound type parameters.</p>
</div>
<p>The Java codegen uses Java Generic types to represent <a class="reference internal" href="../../daml/reference/data-types.html#daml-ref-parameterized-types"><span class="std std-ref">Daml parameterized types</span></a>.</p>
<p>This Daml fragment defines the parameterized type <code class="docutils literal notranslate"><span class="pre">Attribute</span></code>, used by the <code class="docutils literal notranslate"><span class="pre">BookAttribute</span></code> type for modeling the characteristics of the book:</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Com/Acme/ParametrizedTypes.daml</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Com.Acme.ParameterizedTypes</span> <span class="kr">where</span>

<span class="kr">data</span> <span class="kt">Attribute</span> <span class="n">a</span> <span class="ow">=</span> <span class="kt">Attribute</span>
    <span class="kr">with</span> <span class="n">v</span> <span class="kt">:</span> <span class="n">a</span>

<span class="kr">data</span> <span class="kt">BookAttributes</span> <span class="ow">=</span> <span class="kt">BookAttributes</span> <span class="kr">with</span>
   <span class="n">pages</span> <span class="kt">:</span> <span class="p">(</span><span class="kt">Attribute</span> <span class="kt">Int</span><span class="p">)</span>
   <span class="n">authors</span> <span class="kt">:</span> <span class="p">(</span><span class="kt">Attribute</span> <span class="p">[</span><span class="kt">Text</span><span class="p">])</span>
   <span class="n">title</span> <span class="kt">:</span> <span class="p">(</span><span class="kt">Attribute</span> <span class="kt">Text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The Java codegen generates a Java file with a generic class for  the <code class="docutils literal notranslate"><span class="pre">Attribute</span> <span class="pre">a</span></code> data type:</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">com/acme/parametrizedtypes/Attribute.java</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.parametrizedtypes</span><span class="p">;</span>

<span class="hll"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Attribute</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span> <span class="p">{</span>
</span>  <span class="kd">public</span> <span class="kd">final</span> <span class="n">a</span> <span class="n">value</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">Attribute</span><span class="p">(</span><span class="n">a</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span>  <span class="p">}</span>

<span class="hll">  <span class="kd">public</span> <span class="n">DamlRecord</span> <span class="nf">toValue</span><span class="p">(</span><span class="n">Function</span><span class="o">&lt;</span><span class="n">a</span><span class="p">,</span> <span class="n">Value</span><span class="o">&gt;</span> <span class="n">toValuea</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span>
<span class="hll">  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span> <span class="n">Attribute</span><span class="o">&lt;</span><span class="n">a</span><span class="o">&gt;</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value$</span><span class="p">,</span> <span class="n">Function</span><span class="o">&lt;</span><span class="n">Value</span><span class="p">,</span> <span class="n">a</span><span class="o">&gt;</span> <span class="n">fromValuea</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enums">
<h4>Enums<a class="headerlink" href="#enums" title="Permalink to this headline">¶</a></h4>
<p>An enum type is a simplified <a class="reference internal" href="../../daml/reference/data-types.html#daml-ref-sum-types"><span class="std std-ref">sum type</span></a> with multiple
constructors but without argument nor type parameters. The generated code is
standard java Enum whose constants map enum type constructors.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Com/Acme/Enum.daml</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-daml notranslate"><div class="highlight"><pre><span></span><span class="kr">module</span> <span class="nn">Com.Acme.Enum</span> <span class="kr">where</span>

<span class="kr">data</span> <span class="kt">Color</span> <span class="ow">=</span> <span class="kt">Red</span> <span class="o">|</span> <span class="kt">Blue</span> <span class="o">|</span> <span class="kt">Green</span>
</pre></div>
</div>
</div>
<p>The Java code generated for this variant is:</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">com/acme/enum/Color.java</span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.enum</span><span class="p">;</span>


<span class="kd">public</span> <span class="kd">enum</span> <span class="n">Color</span> <span class="p">{</span>
  <span class="n">RED</span><span class="p">,</span>

  <span class="n">GREEN</span><span class="p">,</span>

  <span class="n">BLUE</span><span class="p">;</span>

  <span class="cm">/* ... */</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Color</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value$</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="kd">final</span> <span class="n">DamlEnum</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span>  <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">com/acme/enum/bookattribute/Authors.java</span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.acme.enum.bookattribute</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Authors</span> <span class="kd">extends</span> <span class="n">BookAttribute</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">listValue</span><span class="p">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Authors</span> <span class="nf">fromValue</span><span class="p">(</span><span class="n">Value</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">Author</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">listValue</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Value</span> <span class="nf">toValue</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-a-value-of-a-generated-type-to-a-java-bindings-value">
<h5>Convert a value of a generated type to a Java Bindings value<a class="headerlink" href="#convert-a-value-of-a-generated-type-to-a-java-bindings-value" title="Permalink to this headline">¶</a></h5>
<p>To convert an instance of the generic type <code class="docutils literal notranslate"><span class="pre">Attribute&lt;a&gt;</span></code> to a Java Bindings <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Value.html">Value</a>, call the <code class="docutils literal notranslate"><span class="pre">toValue</span></code> method and pass a function as the <code class="docutils literal notranslate"><span class="pre">toValuea</span></code> argument for converting the field of type <code class="docutils literal notranslate"><span class="pre">a</span></code> to the respective Java Bindings <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Value.html">Value</a>. The name of the parameter consists of <code class="docutils literal notranslate"><span class="pre">toValue</span></code> and the name of the type parameter, in this case <code class="docutils literal notranslate"><span class="pre">a</span></code>, to form the name <code class="docutils literal notranslate"><span class="pre">toValuea</span></code>.</p>
<p>Below is a Java fragment that converts an attribute with a <code class="docutils literal notranslate"><span class="pre">java.lang.Long</span></code> value to the Java Bindings representation using the <em>method reference</em> <code class="docutils literal notranslate"><span class="pre">Int64::new</span></code>.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">pagesAttribute</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Attributes</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="mi">42L</span><span class="p">);</span>

<span class="n">Value</span> <span class="n">serializedPages</span> <span class="o">=</span> <span class="n">pagesAttribute</span><span class="p">.</span><span class="na">toValue</span><span class="p">(</span><span class="n">Int64</span><span class="p">::</span><span class="k">new</span><span class="p">);</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#daml-codegen-java-primitive-types"><span class="std std-ref">Daml To Java Type Mapping</span></a> for an overview of the Java Bindings <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Value.html">Value</a> types.</p>
<p>Note: If the Daml type is a record or variant with more than one type parameter, you need to pass a conversion function to the <code class="docutils literal notranslate"><span class="pre">toValue</span></code> method for each type parameter.</p>
</div>
<div class="section" id="create-a-value-of-a-generated-type-from-a-java-bindings-value">
<h5>Create a value of a generated type from a Java Bindings value<a class="headerlink" href="#create-a-value-of-a-generated-type-from-a-java-bindings-value" title="Permalink to this headline">¶</a></h5>
<p>Analogous to the <code class="docutils literal notranslate"><span class="pre">toValue</span></code> method, to create a value of a generated type, call the method <code class="docutils literal notranslate"><span class="pre">fromValue</span></code> and pass conversion functions from a Java Bindings <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Value.html">Value</a> type to the expected Java type.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">pagesAttribute</span> <span class="o">=</span> <span class="n">Attribute</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span><span class="n">fromValue</span><span class="p">(</span><span class="n">serializedPages</span><span class="p">,</span>
    <span class="n">f</span> <span class="o">-&gt;</span> <span class="n">f</span><span class="p">.</span><span class="na">asInt64</span><span class="p">().</span><span class="na">getOrElseThrow</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Expected Int field&quot;</span><span class="p">).</span><span class="na">getValue</span><span class="p">());</span>
</pre></div>
</div>
<p>See Java Bindings <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/Value.html">Value</a> class for the methods to transform the Java Bindings types into corresponding Java types.</p>
</div>
<div class="section" id="non-exposed-parameterized-types">
<h5>Non-exposed parameterized types<a class="headerlink" href="#non-exposed-parameterized-types" title="Permalink to this headline">¶</a></h5>
<p>If the parameterized type is contained in a type where the <em>actual</em> type is specified (as in the <code class="docutils literal notranslate"><span class="pre">BookAttributes</span></code> type above), then the conversion methods of the enclosing type provides the required conversion function parameters automatically.</p>
</div>
<div class="section" id="convert-optional-values">
<h5>Convert Optional values<a class="headerlink" href="#convert-optional-values" title="Permalink to this headline">¶</a></h5>
<p>The conversion of the Java <code class="docutils literal notranslate"><span class="pre">Optional</span></code> requires two steps. The
<code class="docutils literal notranslate"><span class="pre">Optional</span></code> must be mapped in order to convert its contains before
to be passed to <code class="docutils literal notranslate"><span class="pre">DamlOptional::of</span></code> function.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;&gt;</span> <span class="n">idAttribute</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Attribute</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">42</span><span class="p">));</span>

<span class="n">val</span> <span class="n">serializedId</span> <span class="o">=</span> <span class="n">DamlOptional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">idAttribute</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">Int64</span><span class="p">::</span><span class="k">new</span><span class="p">));</span>
</pre></div>
</div>
<p>To convert back <a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/DamlOptional.html">DamlOptional</a> to Java <code class="docutils literal notranslate"><span class="pre">Optional</span></code>, one must use the
containers method <code class="docutils literal notranslate"><span class="pre">toOptional</span></code>. This method expects a function to
convert back the value possibly contains in the container.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;&gt;</span> <span class="n">idAttribute2</span> <span class="o">=</span>
  <span class="n">serializedId</span><span class="p">.</span><span class="na">toOptional</span><span class="p">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="n">v</span><span class="p">.</span><span class="na">asInt64</span><span class="p">().</span><span class="na">orElseThrow</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Expected Int64 element&quot;</span><span class="p">)));</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-collection-values">
<h5>Convert Collection values<a class="headerlink" href="#convert-collection-values" title="Permalink to this headline">¶</a></h5>
<p><a class="reference external" href="/app-dev/bindings-java/javadocs/com/daml/ledger/javaapi/data/DamlCollectors.html">DamlCollectors</a> provides collectors to converted Java collection
containers such as <code class="docutils literal notranslate"><span class="pre">List</span></code> and <code class="docutils literal notranslate"><span class="pre">Map</span></code> to DamlValues in one pass. The
builders for those collectors require functions to convert the element
of the container.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">authorsAttribute</span> <span class="o">=</span>
    <span class="k">new</span> <span class="n">Attribute</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;Homer&quot;</span><span class="p">,</span> <span class="s">&quot;Ovid&quot;</span><span class="p">,</span> <span class="s">&quot;Vergil&quot;</span><span class="p">));</span>

<span class="n">Value</span> <span class="n">serializedAuthors</span> <span class="o">=</span>
    <span class="n">authorsAttribute</span><span class="p">.</span><span class="na">toValue</span><span class="p">(</span><span class="n">f</span> <span class="o">-&gt;</span> <span class="n">f</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">collect</span><span class="p">(</span><span class="n">DamlCollector</span><span class="p">.</span><span class="na">toList</span><span class="p">(</span><span class="n">Text</span><span class="p">::</span><span class="k">new</span><span class="p">));</span>
</pre></div>
</div>
<p>To convert back Daml containers to Java ones, one must use the
containers methods <code class="docutils literal notranslate"><span class="pre">toList</span></code> or <code class="docutils literal notranslate"><span class="pre">toMap</span></code>. Those methods expect
functions to convert back the container’s entries.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Attribute</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">authorsAttribute2</span> <span class="o">=</span>
    <span class="n">Attribute</span><span class="p">.</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span><span class="n">fromValue</span><span class="p">(</span>
        <span class="n">serializedAuthors</span><span class="p">,</span>
        <span class="n">f0</span> <span class="o">-&gt;</span> <span class="n">f0</span><span class="p">.</span><span class="na">asList</span><span class="p">().</span><span class="na">orElseThrow</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Expected DamlList field&quot;</span><span class="p">))</span>
             <span class="p">.</span><span class="na">toList</span><span class="p">(</span>
                 <span class="n">f1</span> <span class="o">-&gt;</span> <span class="n">f1</span><span class="p">.</span><span class="na">asText</span><span class="p">().</span><span class="na">orElseThrow</span><span class="p">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s">&quot;Expected Text element&quot;</span><span class="p">))</span>
                      <span class="p">.</span><span class="na">getValue</span><span class="p">()</span>
             <span class="p">)</span>
    <span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


              
            </div>
            
            
              <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="index.html" class="da-btn da-btn-label btn-prev" title="Java bindings" accesskey="p" rel="prev">Previous</a>
      
      
        <a href="example.html" class="da-btn da-btn-label btn-next" title="Example project" accesskey="n" rel="next">Next</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. Any unauthorized use, duplication or distribution is strictly prohibited. &#34;Digital Asset&#34; and &#34;Daml&#34; are Registered in the U.S. Patent and Trademark Office.

    </p>
  </div> 

</footer>
            
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved. -->
<!-- SPDX-License-Identifier: Apache-2.0 -->





  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.Navigation.enable(true);
      });
  </script>


  
    
  
  <div id="inpageContent"></div>
  

</body>
</html>